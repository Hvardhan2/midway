"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7464],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>u});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=i.createContext({}),d=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},l=function(e){var t=d(e.components);return i.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=d(n),u=a,f=p["".concat(c,".").concat(u)]||p[u]||m[u]||o;return n?i.createElement(f,r(r({ref:t},l),{},{components:n})):i.createElement(f,r({ref:t},l))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var d=2;d<o;d++)r[d]=n[d];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},9372:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var i=n(7462),a=(n(7294),n(3905));const o={title:"Lint \u5de5\u5177\u3001\u89c4\u5219\u548c\u683c\u5f0f\u5316"},r=void 0,s={unversionedId:"tool/mwts",id:"tool/mwts",title:"Lint \u5de5\u5177\u3001\u89c4\u5219\u548c\u683c\u5f0f\u5316",description:"Midway's framework and business code are written by TypeScript. The default Midway provides a set of default lint, editor and formatting rules for more convenient development and testing.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/tool/mwts.md",sourceDirName:"tool",slug:"/tool/mwts",permalink:"/en/docs/tool/mwts",draft:!1,editUrl:"https://github.com/midwayjs/midway/tree/main/site/docs/tool/mwts.md",tags:[],version:"current",frontMatter:{title:"Lint \u5de5\u5177\u3001\u89c4\u5219\u548c\u683c\u5f0f\u5316"},sidebar:"other",previous:{title:"midwayjs/cli",permalink:"/en/docs/tool/cli"},next:{title:"\u68c0\u67e5\u5de5\u5177",permalink:"/en/docs/tool/luckyeye"}},c={},d=[{value:"Code style library",id:"code-style-library",level:2}],l={toc:d};function m(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Midway's framework and business code are written by TypeScript. The default Midway provides a set of default lint, editor and formatting rules for more convenient development and testing."),(0,a.kt)("h2",{id:"code-style-library"},"Code style library"),(0,a.kt)("p",null,"The code style library of Midway is called ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/midwayjs/mwts"},"mwts"),", which is derived from Google's ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/google/gts"},"gts"),". Mwts is Midway's TypeScript style guide and the configuration of formatter, linter and automatic code fix."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"In the midway project, we will add mwts by default. The following process is just to explain how to use mwts.\nnull"),(0,a.kt)("p",{parentName:"admonition"},"In order to use mwts, we need to add it to the development dependency."),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-json"},'  "devDependencies ": {\n    "mwts": "^1.0.5 ",\n    "typescript": "^4.0.0"\n  },\n')),(0,a.kt)("h2",{parentName:"admonition",id:"eslint-configuration"},"ESLint configuration"),(0,a.kt)("p",{parentName:"admonition"},"Mwts provides a default set of ESLint configurations (TSLint has been abandoned and merged into ESLint)."),(0,a.kt)("p",{parentName:"admonition"},"Create a ",(0,a.kt)("inlineCode",{parentName:"p"},".eslintrc.json")," file in the root directory of the project, with the following contents (usually scaffolding will bring it with it):"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "extends": "./node_modules/mwts /",\n  "ignorePatterns": ["node_modules", "dist", "test", "jest.config.js", "interface.ts"]\n  "env ": {\n    "jest": true\n  }\n}\n')),(0,a.kt)("p",{parentName:"admonition"},"The above is the default configuration of midway project. Other project ",(0,a.kt)("inlineCode",{parentName:"p"},"ignorePatterns")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"env")," can be adjusted according to ESLint."),(0,a.kt)("p",{parentName:"admonition"},"For more information about the default rules for mwts, see ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/midwayjs/mwts/blob/master/.eslintrc.json"},"here"),"."),(0,a.kt)("h2",{parentName:"admonition",id:"perform-code-checking-and-formatting"},"Perform code checking and formatting"),(0,a.kt)("p",{parentName:"admonition"},"You can run the ",(0,a.kt)("inlineCode",{parentName:"p"},"mwts check")," command and the ",(0,a.kt)("inlineCode",{parentName:"p"},"mwts fix")," command to check the code. For example, add script commands to the project (usually scaffolding will come with it)."),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'  "scripts ": {\n    "lint": "mwts check ",\n    null\n  },\n')),(0,a.kt)("h2",{parentName:"admonition",id:"prettier-configuration"},"Prettier configuration"),(0,a.kt)("p",{parentName:"admonition"},"Mwts provides a set of default prettier configurations, creating a ",(0,a.kt)("inlineCode",{parentName:"p"},".prettierrc.js")," file with the following configuration contents (usually scaffolding comes with it)."),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"module.exports = {\n  ...require('mwts/.prettierrc.json')\n};\n")),(0,a.kt)("h2",{parentName:"admonition",id:"configure-save-automatic-formatting"},"Configure save automatic formatting"),(0,a.kt)("p",{parentName:"admonition"},"Let's take VSCode as an example."),(0,a.kt)("p",{parentName:"admonition"},"The first step is to install the Prettier plug-in."),(0,a.kt)("img",{src:"https://cdn.nlark.com/yuque/0/2021/png/501408/1618042429530-177c3636-aefc-419d-8d3a-5258cad13631.png#align=left&display=inline&height=536&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1072&originWidth=800&size=114476&status=done&style=none&width=400",width:"400"}),(0,a.kt)("p",{parentName:"admonition"},'Open the configuration, search for "save", find "Format On Save" on the right, and check.'),(0,a.kt)("img",{src:"https://cdn.nlark.com/yuque/0/2021/png/501408/1618042494782-71b6cc3c-18ae-4344-987b-ec82084f2dd8.png#align=left&display=inline&height=788&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1576&originWidth=2370&size=341414&status=done&style=none&width=1185",width:"1185"}),(0,a.kt)("p",{parentName:"admonition"},"If saving the file has no effect, the editor usually has multiple formatting methods, you can right-click to make the default selection."),(0,a.kt)("img",{src:"https://cdn.nlark.com/yuque/0/2021/png/501408/1618125271116-845e8452-0f7b-46a9-a28a-388f2db9c5e3.png#align=left&display=inline&height=458&margin=%5Bobject%20Object%5D&name=image.png&originHeight=916&originWidth=564&size=102932&status=done&style=none&width=282",width:"282"}),(0,a.kt)("p",{parentName:"admonition"},'Select Configure Default Formatters ".'),(0,a.kt)("img",{src:"https://cdn.nlark.com/yuque/0/2021/png/501408/1618125381302-d3fe30c1-e56d-43f8-ada2-6e315f4ff2c4.png#align=left&display=inline&height=144&margin=%5Bobject%20Object%5D&name=image.png&originHeight=288&originWidth=990&size=37986&status=done&style=none&width=495",width:"495"}),(0,a.kt)("p",{parentName:"admonition"},"Select Prettier."),(0,a.kt)("img",{src:"https://cdn.nlark.com/yuque/0/2021/png/501408/1618125423564-8e46b0f8-f422-4e3d-a805-3b0a1db037f8.png#align=left&display=inline&height=104&margin=%5Bobject%20Object%5D&name=image.png&originHeight=208&originWidth=1074&size=35043&status=done&style=none&width=537",width:"537"})))}m.isMDXComponent=!0}}]);