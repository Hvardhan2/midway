"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8152],{3905:(e,r,t)=>{t.d(r,{Zo:()=>p,kt:()=>v});var n=t(7294);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=n.createContext({}),c=function(e){var r=n.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},p=function(e){var r=c(e.components);return n.createElement(l.Provider,{value:r},e.children)},u={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},d=n.forwardRef((function(e,r){var t=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(t),v=a,m=d["".concat(l,".").concat(v)]||d[v]||u[v]||s;return t?n.createElement(m,o(o({ref:r},p),{},{components:t})):n.createElement(m,o({ref:r},p))}));function v(e,r){var t=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var s=t.length,o=new Array(s);o[0]=d;var i={};for(var l in r)hasOwnProperty.call(r,l)&&(i[l]=r[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var c=2;c<s;c++)o[c]=t[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5856:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var n=t(7462),a=(t(7294),t(3905));const s={},o="Migrate from Serverless v2 to v3",i={unversionedId:"serverless/serverless_v2_upgrade_serverless_v3",id:"serverless/serverless_v2_upgrade_serverless_v3",title:"Migrate from Serverless v2 to v3",description:"Based on Midway's upgrade to v3, the Serverless system has also been upgraded to v3 version simultaneously.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/serverless/serverless_v2_upgrade_serverless_v3.md",sourceDirName:"serverless",slug:"/serverless/serverless_v2_upgrade_serverless_v3",permalink:"/en/docs/serverless/serverless_v2_upgrade_serverless_v3",draft:!1,editUrl:"https://github.com/midwayjs/midway/tree/main/site/docs/serverless/serverless_v2_upgrade_serverless_v3.md",tags:[],version:"current",frontMatter:{},sidebar:"serverless",previous:{title:"Introduce",permalink:"/en/docs/serverless/serverless_intro"},next:{title:"Development function",permalink:"/en/docs/serverless/serverless_dev"}},l={},c=[{value:"Manual upgrade",id:"manual-upgrade",level:2},{value:"1. Upgrade of Project Package Version",id:"1-upgrade-of-project-package-version",level:3},{value:"2. Changes in the main frame of the entrance",id:"2-changes-in-the-main-frame-of-the-entrance",level:3}],p={toc:c};function u(e){let{components:r,...t}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,t,{components:r,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"migrate-from-serverless-v2-to-v3"},"Migrate from Serverless v2 to v3"),(0,a.kt)("p",null,"Based on Midway's upgrade to v3, the Serverless system has also been upgraded to v3 version simultaneously."),(0,a.kt)("p",null,"This article describes how to migrate from Serverless v2.0 to Serverless v3.0, which is very similar to traditional application upgrades."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"We are still adjusting the v3 version of the function, mainly for the entry part and test part generated by the deployment, and the user code should not change.")),(0,a.kt)("h2",{id:"manual-upgrade"},"Manual upgrade"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Midway v3 can start from node V12. Therefore, the container environment for related functions must be the version of Node. js V12 or later.")),(0,a.kt)("h3",{id:"1-upgrade-of-project-package-version"},"1. Upgrade of Project Package Version"),(0,a.kt)("p",null,"Dependent package upgrade, related package upgrade to 3.0."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "dependencies": {\n    "@midwayjs/core": "^3.0.0",\n    "@midwayjs/decorator": "^3.0.0",\n    "@midwayjs/faas": "^3.0.0"\n  },\n  "devDependencies": {\n    "@midwayjs/cli": "^1.2.45 ",\n    "@midwayjs/mock": "^3.0.0",\n    "@midwayjs/serverless-app": "^3.0.0",\n    // ...\n  }\n}\n')),(0,a.kt)("h3",{id:"2-changes-in-the-main-frame-of-the-entrance"},"2. Changes in the main frame of the entrance"),(0,a.kt)("p",null,"For example, provide faas as the main framework."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"// src/configuration\nimport * as faas from '@midwayjs/faas';\n\n@Configuration({\n  // ...\n  imports: [\n    faas\n  ],\n})\nexport class MainConfiguration {\n  // ...\n}\n\n")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Due to the adjustment, the current modification may not be complete, and users with concerns should not use V3 functions for the time being.")))}u.isMDXComponent=!0}}]);